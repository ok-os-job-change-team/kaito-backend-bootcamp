# 【Ruby備忘録】 配列と繰り返し処理<a id="index" href="#index"></a>

### 目次
- [1. 配列とは](#section1)
- [2. 要素の変更、追加、削除、取得](#section2)
- [3. ブロックを使う配列のメソッド](#section3)
- [4. 配列とインスタンス](#section4)
- [参考文献](#section5)
---------
### <a id="section1" href="#section1">1. 配列とは</a>  
- 複数のデータをまとめて格納できるオブジェクトのこと。
- 配列内のデータは「要素」と呼ぶ。
- 要素は「インデックス」を指定することで取り出すことができる。
  ```ruby
  # 配列を作成
  array = ['a', 'b', 'c']
  # 1つ目の要素を取得
  array[0] #=> a
  # 2つ目の要素を取得
  array[1] #=> b
  # 3つ目の要素を取得
  array[2] #=> c
  ```

### <a id="section2" href="#section2">2. 要素の変更、追加、削除、取得</a> 
#### ＜要素の変更＞
- インデックスを指定して値を代入することで、指定した要素を変更できる。
  ```ruby
  array = ['a', 'b', 'c']
  # 2番目の要素をｘに変更
  array[1] = x 
  array #=>  ['a', 'x', 'c']
  ```
- 開始位置と長さを指定して要素を変更する。
  ```ruby
  nums = [1, 2, 3, 4, 5]
  # 2つ目から3要素分を100に変更
  nums[1, 3] = 100
  a #=> [1, 100, 5]
  ```
#### ＜要素の追加＞
- 「<<」を使うことで配列の最後に要素を追加できる。
  ```ruby
  array = ['a', 'b', 'c']
  # 最後に要素をｘを追加
  array << 'x'
  array #=>  ['a', 'x', 'c', 'x']
  ```
- pushメソッドで要素を追加する。
  ```ruby
  nums = [1, 2]
  # 最後に3を追加
  nums.push(3)
  nums #=> [1, 2, 3]
  ```
#### ＜要素の削除＞
- delete_atメソッドを使うことで任意の要素を削除できる。
  ```ruby
  array = ['a', 'b', 'c']
  # ２番目の要素を削除する(削除した値が戻り値になる)
  a.delete_at(1) #=> b
  array #=>  ['a', 'c']
  ```
- deleteメソッドで任意の値と一致する要素を削除する。
  ```ruby
  nums = [1, 2, 3, 1, 2, 3]
  # 値が2である要素を削除(削除した値が戻り値となる)
  nums.delete(2) #=> 2
  nums           #=> [1, 3, 1, 3]
  ```
#### ＜要素の取得＞
- 配列[インデックス, 取得する長さ]で任意の要素から指定した分だけ連続した要素を取り出す。
  ```ruby
  nums = [1, 2, 3, 4, 5]
  # 2つ目の要素から3つ分の要素を取り出す
  nums[2, 3] #=> [2, 3, 4]
  ```
- values_atメソッドで取得したい要素のインデックスを複数指定する。
  ```ruby
  nums = [1, 2, 3, 4, 5]
  # 1つ目、3つ目、5つ目の要素を取り出す
  nums.values_at[0, 2, 4] #=> [1, 3, 5]
  ```
- 配列の最後の要素を取り出す。
  ```ruby
  nums = [1, 2, 3, 4, 5]
  # 負のインデックスを指定
  nums[-1]  #=> 5
  # lastメソッドを使う
  nums.last #=> 5
  ```

### <a id="section3" href="#section3">3. ブロックを使う配列のメソッド</a>
#### ＜eachメソッド＞
- 配列の要素を順番に取り出して、取り出した要素についてブロック内の処理をする。
  ```ruby
  nums = [1, 2, 3, 4]
  sum = 0
  # 配列の各要素をsumに加算する
  nums.each do |n|
    sum += n
  end
  nums #=> 10
  ```
#### ＜mapメソッド＞
- 各要素に対してブロックを評価した結果を新しい配列にして返す。
- エイリアスメソッドはcollect
  ```ruby
  nums = [1, 2, 3, 4, 5]
  # ブロックの戻り値が新しい配列の各要素になる
  new_nums = nums.map{ |n| n * 10 }
  new_nums #=> [10, 20, 30, 40, 50]
  ```
#### ＜selectメソッド＞
- 各要素に対してブロックを評価し、戻り値が真となる要素を集めた配列を返す。
- エイリアスメソッドはfind_all
  ```ruby
  nums = [1, 2, 3, 4, 5, 6]
  # ブロックの戻り値が真となる要素だけを集める
  even_nums = nums.select{ |n| n.even? }
  even_nums #=> [2, 4, 6]
  ```
#### ＜findメソッド＞
- ブロックの戻り値が真になった最初の要素を返す。
- エイリアスメソッドはdetect
  ```ruby
  nums = [1, 2, 3, 4, 5, 6]
  # ブロックの戻り値が最初に真となった要素を返す
  even_nums = nums.find{ |n| n.even? }
  even_nums #=> 2
  ```
#### ＜sumメソッド＞
- 要素の合計を求める。
  ```ruby
  nums = [1, 2, 3, 4]
  # 要素の合計
  num.sums #=> 10
  # 初期値を5とする
  num.sums(5) #=> 15
  # 各要素を2倍してから合計する
  num.sums{ |n| n * 2 } #=> 20
  ```
- 要素が文字列の場合、初期値に文字列を指定することで各要素の文字列が連結される。
  ```ruby
  chars = ['a', 'b', 'c']
  chars.sum('') #=> "abc"
  ```
#### ＜joinメソッド＞
- 配列の要素を連結して1つの文字列にする。
- 要素に数値が含まれている場合は文字列に変換される。
  ```ruby
  chars = ['a', 'b', 'c']
  # 要素を連結
  chars.join #=> "abc"
  # 区切り文字にハイフンを指定して連結
  chars.join('-') #=> "a-b-c"
  ```

### <a id="section4" href="#section4">4. 配列とインスタンス</a>
#### ＜配列の要素がインスタンスのとき＞
- 配列の要素がインスタンスの場合は、コード上での要素の表記と、標準出力での要素の表示が異なる。
  ```ruby
  # コード上の表記
  [User.new(1, 2, 8), User.new(2, 3, 5)]

  # 標準出力上の表記
  [#<User:0x00007f92f4a48a38
  @created_at="2023-08-09",
  @email="kaito@example.com",
  @id="1",
  @password="password",
  @updated_at="2023-08-31">,
  #<User:0x00007f92f4a489e8
  @created_at="2023-08-11",
  @email="kaito+1@example.com",
  @id="2",
  @password="password",
  @updated_at="2023-08-30">]
  ```

### <a id="section5" href="#section5">参考文献</a>
- プロを目指す人のためのRuby入門 4章「配列や繰り返し処理を理解する」

### [ページTOPに戻る](#index)
